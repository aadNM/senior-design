(this["webpackJsonprasa-frontend"]=this["webpackJsonprasa-frontend"]||[]).push([[8],{2582:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(23),c=s(0),i=s(1),r=s(9),l=s(2281),o=s(1184),j=s(1185),d=s(217),b=s(4),u=s(16),x=s(250),h=s(266),O=s(28);function m(e){var t=e.children;return Object(c.jsx)(O.a,{content:t,ml:1,children:Object(c.jsx)(h.a,{icon:x.faInfoCircle,style:{fontSize:18}})})}var v=s(22),f=s(45),g=s.n(f),k=(s(2400),s(2556)),p=s(2557),y=s(2574),M=s(2450),w=s(2449),A=s(2548),F=s(2549),S={PT1H:"h a",P1D:"DD/MM",P1M:"MMM"},B={PT1H:" [at] h a",P1D:" [on] MMMM Do",P1M:" [in] MMMM"},P=function(e){return g.a.duration(e).format("h [hours] m [minutes] s [seconds]",{trim:"both"})},D=v.default.div.withConfig({displayName:"SimpleLineChart__ValueOnlyTooltip",componentId:"seom60-0"})(["padding:6px 8px;background-color:white;border-radius:0.3em;border:1px solid rgb(204,204,204);"]);function _(e){var t=e.data,s=e.title,a=e.isTime,n=e.isAdvanced,i=e.bucket,r=void 0===i?"P1D":i;if(!t)return null;var l,u=0===(l=t).length?0:l.reduce((function(e,t){return e+t.value}),0)/l.length,x=a?P:function(e){return Math.round(e).toLocaleString()};return Object(c.jsxs)(j.a,{children:[Object(c.jsx)(o.a,{variant:"h4",children:s}),Object(c.jsxs)(b.Flex,{children:[Object(c.jsx)(d.a,{children:x(u)}),Object(c.jsxs)(m,{children:["Average ",s.replace(/^[Aa]verage /,"").toLowerCase()," in the specified time range."]})]}),Object(c.jsx)(k.a,{width:"100%",height:150,children:Object(c.jsxs)(p.a,{data:t,children:[n&&[Object(c.jsx)(y.a,{vertical:!1},"grid"),Object(c.jsx)(M.a,{minTickGap:0,allowDecimals:!1,tickLine:!1},"y-axis"),Object(c.jsx)(w.a,{dataKey:"timestamp",allowDecimals:!1,minTickGap:10,tickLine:!1,tickFormatter:function(e){return g.a.unix(e).format(S[r])}},"x-axis")],Object(c.jsx)(A.a,{cursor:!1,isAnimationActive:!1,content:function(e){var t=e.active,s=e.payload;if(!t)return null;var a=s&&s[0].payload;return a?Object(c.jsxs)(D,{children:[x(a.value),g.a.unix(a.timestamp).format(B[r])]}):null}}),Object(c.jsx)(F.a,{type:"linear",dataKey:"value",stroke:"#3d44bc",fill:"#3d44bc",fillOpacity:.3,strokeWidth:2,dot:!1})]})})]})}var C=s(2245),N=s(731),T=[{label:"last 24 hours",value:"PT1H",data:N.c.PT1H},{label:"last 30 days",value:"P1D",data:N.c.P1D},{label:"last 12 months",value:"P1M",data:N.c.P1M}];function L(e){var t=e.value,s=e.onChange,a=i.useCallback((function(e){return e&&!Array.isArray(e)&&s(e)}),[s]);return Object(c.jsx)(C.a,{value:T.find((function(e){return e.value===t})),items:T,onChange:a})}function U(e){var t=e.onFetchAnalytics,s=e.analytics,a=e.bucket,n=e.conversationsStatistics,r=Object(u.k)();return i.useEffect((function(){r("view:analytics:loaded")}),[r]),null===s||null===n?null:Object(c.jsx)(l.a,{title:"Analytics",scrollable:!0,rightContent:Object(c.jsx)(b.Box,{mr:3,children:Object(c.jsx)(L,{value:a,onChange:function(e){return t({bucket:e.value,start:e.data.start,end:e.data.end})}})}),children:Object(c.jsxs)(b.Flex,{flexDirection:"column",children:[Object(c.jsx)(o.a,{variant:"h3",mb:3,children:"Sessions"}),Object(c.jsxs)(b.Flex,{mb:4,flex:"1 0 auto",children:[Object(c.jsx)(b.Box,{mr:3,width:1/3,children:Object(c.jsx)(_,{data:s.conversation_length,bucket:a,title:"Average Session Length",isTime:!0})}),Object(c.jsx)(b.Box,{mx:3,width:1/3,children:Object(c.jsx)(_,{data:s.conversation_steps,bucket:a,title:"Average Number of Messages per Session"})}),Object(c.jsx)(b.Box,{ml:3,width:1/3,children:Object(c.jsx)(_,{data:s.sessions_per_user,bucket:a,title:"Average Number of Sessions per User"})})]}),Object(c.jsx)(o.a,{variant:"h3",mb:3,children:"Users"}),Object(c.jsxs)(b.Flex,{mb:4,flex:"1 0 auto",children:[Object(c.jsx)(b.Box,{mr:3,width:2/3,children:Object(c.jsx)(_,{data:s.conversations,bucket:a,title:"Number of Active Users",isAdvanced:!0})}),Object(c.jsx)(b.Box,{mx:3,width:1/3,children:Object(c.jsx)(_,{data:s.new_users,bucket:a,title:"Number of New Users"})})]}),Object(c.jsx)(o.a,{variant:"h3",mb:3,children:"Messages"}),Object(c.jsxs)(b.Flex,{mb:4,flex:"1 0 auto",children:[Object(c.jsx)(b.Box,{mr:3,width:2/7,children:Object(c.jsx)(_,{data:s.user_messages,bucket:a,title:"Number of User Messages"})}),Object(c.jsx)(b.Box,{mx:3,width:2/7,children:Object(c.jsx)(_,{data:s.bot_messages,bucket:a,title:"Number of Bot Messages"})}),Object(c.jsx)(b.Box,{mx:3,width:2/7,children:Object(c.jsx)(_,{data:s.total_messages,bucket:a,title:"Number of All Messages"})}),Object(c.jsx)(b.Box,{ml:3,width:1/7,children:Object(c.jsx)(j.a,{sx:{height:"100%"},children:Object(c.jsxs)(b.Flex,{flexDirection:"column",style:{height:"100%"},children:[Object(c.jsxs)(b.Box,{flex:"1",children:[Object(c.jsxs)(b.Flex,{children:[Object(c.jsx)(o.a,{variant:"h4",children:"Overall user messages"}),Object(c.jsx)(m,{children:"Overall number of user messages."})]}),Object(c.jsx)(d.a,{children:n.user_messages.toLocaleString()})]}),Object(c.jsxs)(b.Box,{flex:"1",children:[Object(c.jsxs)(b.Flex,{children:[Object(c.jsx)(o.a,{variant:"h4",children:"Overall bot messages"}),Object(c.jsx)(m,{children:"Overall number of bot messages."})]}),Object(c.jsx)(d.a,{children:n.bot_messages.toLocaleString()})]})]})})})]})]})})}var H=s(263),q=s(19),E={onFetchAnalytics:H.a.request,onFetchConversationsStatistics:q.r.request};t.default=Object(r.b)((function(e){return{analytics:e.analytics.metrics,start:e.analytics.start,end:e.analytics.end,bucket:e.analytics.bucket,conversationsStatistics:e.messages.conversationsStatistics,loading:e.analytics.loading}}),E)((function(e){var t=e.start,s=e.end,r=Object(n.a)(e,["start","end"]),l=r.bucket,o=r.onFetchAnalytics,j=r.onFetchConversationsStatistics;return i.useEffect((function(){o({bucket:l,start:t,end:s}),j()}),[l,t,s,o,j]),Object(c.jsx)(U,Object(a.a)({},r))}))}}]);